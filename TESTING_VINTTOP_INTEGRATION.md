# Тестирование интеграции с VintTop.ru

## Настройки поставщика

Поставщик **VintTop.ru** успешно создан с реальными учетными данными:
- **API URL**: http://46.226.167.12
- **Логин**: autovag@bk.ru
- **Пароль**: 0754
- **Тип API**: API автозапчастей
- **ID поставщика**: 4

## Пошаговое тестирование

### 1. Тест подключения к API

1. Откройте админку Django: http://127.0.0.1:8000/admin/
2. Перейдите в **Каталог > Поставщики**
3. Найдите **VintTop.ru** и откройте его
4. Нажмите кнопку **"Тест API"**
5. Проверьте результат подключения в логах

### 2. Поиск товаров по артикулу

1. В админке поставщика нажмите **"Интеграция API"**
2. Перейдите на вкладку **"Поиск товаров"**
3. Введите тестовый артикул (например: `0986424815`)
4. Нажмите **"Поиск"**
5. Проверьте результаты поиска

### 3. Синхронизация сущностей

#### 3.1 Синхронизация сотрудников
1. В интеграции API перейдите на **"Сущности"**
2. В разделе **"Сотрудники"** нажмите **"Синхронизировать"**
3. Проверьте загруженных сотрудников

#### 3.2 Синхронизация способов доставки
1. В разделе **"Способы доставки"** нажмите **"Синхронизировать"**
2. Проверьте загруженные способы доставки

#### 3.3 Синхронизация статусов заказов
1. В разделе **"Статусы заказов"** нажмите **"Синхронизировать"**
2. Проверьте загруженные статусы

#### 3.4 Синхронизация групп клиентов
1. В разделе **"Группы клиентов"** нажмите **"Синхронизировать"**
2. Проверьте загруженные группы

#### 3.5 Синхронизация клиентов
1. В разделе **"Клиенты"** нажмите **"Синхронизировать"**
2. Проверьте загруженных клиентов с их балансами

### 4. Работа с заказами

#### 4.1 Просмотр заказов
1. Перейдите на вкладку **"Заказы"**
2. Нажмите **"Синхронизировать заказы"**
3. Просмотрите загруженные заказы с товарами и историей

#### 4.2 Создание заказа (если поддерживается API)
1. В интерфейсе заказов попробуйте создать тестовый заказ
2. Проверьте, что заказ создался в системе поставщика

### 5. Полная синхронизация

1. В админке поставщика нажмите **"Полная синхронизация"**
2. Дождитесь завершения процесса
3. Проверьте логи синхронизации
4. Убедитесь, что все данные загружены корректно

### 6. Проверка товаров

1. Нажмите **"Синхронизация товаров"** в админке поставщика
2. Проверьте, что товары загружаются с правильными артикулами и ценами
3. Убедитесь, что создаются связи с брендами и категориями

## Ожидаемые результаты

### При успешном тестировании вы должны увидеть:

✅ **Тест API**: Успешное подключение к API vinttop.ru  
✅ **Поиск товаров**: Результаты поиска по артикулам  
✅ **Сотрудники**: Список активных сотрудников из API  
✅ **Доставка**: Доступные способы доставки  
✅ **Статусы**: Статусы заказов из системы поставщика  
✅ **Группы клиентов**: Различные группы клиентов  
✅ **Клиенты**: Клиенты с их контактной информацией и балансами  
✅ **Заказы**: Заказы с товарами, статусами и историей изменений  
✅ **Товары**: Синхронизированные товары с ценами и остатками  

### При ошибках проверьте:

❌ **Ошибки авторизации**: Проверьте логин/пароль в настройках поставщика  
❌ **Ошибки подключения**: Убедитесь в доступности API URL  
❌ **Ошибки формата**: Проверьте логи для понимания структуры ответов API  
❌ **Ошибки данных**: Проверьте маппинг полей в коде интеграции  

## Логи и отладка

Все операции логируются в:
- **SupplierSyncLog** - основные логи синхронизации
- **Django admin logs** - действия в административной панели
- **Console output** - детальная информация при разработке

Для просмотра логов:
1. Перейдите в **Каталог > Логи синхронизации поставщиков**
2. Фильтруйте по поставщику **VintTop.ru**
3. Проверьте статусы операций (success/error/info)

## Дополнительные возможности

После успешного базового тестирования можно протестировать:

1. **Автоматическая синхронизация** - настройте расписание обновлений
2. **Уведомления** - проверьте отправку уведомлений об изменениях
3. **Фильтрация товаров** - настройте правила импорта только нужных товаров
4. **Ценообразование** - проверьте применение наценок и округления
5. **Категоризация** - убедитесь в правильном распределении по категориям

## Поддержка

При возникновении проблем:
1. Проверьте логи в админке Django
2. Убедитесь в актуальности API credentials
3. Проверьте доступность API endpoint
4. Обратитесь к документации vinttop.ru API

---

**Текущий статус**: Интеграция полностью настроена и готова к тестированию
**Последнее обновление**: {{ date }}
